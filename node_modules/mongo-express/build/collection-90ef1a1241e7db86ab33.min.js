webpackJsonp([1],{

/***/ 6:
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;// Copyright © 2013-2017 David Caldwell <david@porkrind.org>
//
// Permission to use, copy, modify, and/or distribute this software for any
// purpose with or without fee is hereby granted, provided that the above
// copyright notice and this permission notice appear in all copies.
//
// THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY
// SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION
// OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN
// CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.

// Usage
// -----
// The module exports one entry point, the `renderjson()` function. It takes in
// the JSON you want to render as a single argument and returns an HTML
// element.
//
// Options
// -------
// renderjson.set_icons("+", "-")
//   This Allows you to override the disclosure icons.
//
// renderjson.set_show_to_level(level)
//   Pass the number of levels to expand when rendering. The default is 0, which
//   starts with everything collapsed. As a special case, if level is the string
//   "all" then it will start with everything expanded.
//
// renderjson.set_max_string_length(length)
//   Strings will be truncated and made expandable if they are longer than
//   `length`. As a special case, if `length` is the string "none" then
//   there will be no truncation. The default is "none".
//
// renderjson.set_sort_objects(sort_bool)
//   Sort objects by key (default: false)
//
// renderjson.set_replacer(replacer_function)
//   Equivalent of JSON.stringify() `replacer` argument when it's a function
//
// renderjson.set_property_list(property_list)
//   Equivalent of JSON.stringify() `replacer` argument when it's an array
//
// Theming
// -------
// The HTML output uses a number of classes so that you can theme it the way
// you'd like:
//     .disclosure    ("⊕", "⊖")
//     .syntax        (",", ":", "{", "}", "[", "]")
//     .string        (includes quotes)
//     .number
//     .boolean
//     .key           (object key)
//     .keyword       ("null", "undefined")
//     .object.syntax ("{", "}")
//     .array.syntax  ("[", "]")

(function (root, factory) {
  if(true) {
    !(__WEBPACK_AMD_DEFINE_RESULT__ = function() {
      return (root.renderjson = factory());
    }.call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
  } else if (typeof module === "object" && module.exports) {
    module.exports = factory();
  } else {
    root.renderjson = factory();
  }
}(this, function() {
    var themetext = function(/* [class, text]+ */) {
        var spans = [];
        while (arguments.length)
            spans.push(append(span(Array.prototype.shift.call(arguments)),
                              text(Array.prototype.shift.call(arguments))));
        return spans;
    };
    var append = function(/* el, ... */) {
        var el = Array.prototype.shift.call(arguments);
        for (var a=0; a<arguments.length; a++)
            if (arguments[a].constructor == Array)
                append.apply(this, [el].concat(arguments[a]));
            else
                el.appendChild(arguments[a]);
        return el;
    };
    var prepend = function(el, child) {
        el.insertBefore(child, el.firstChild);
        return el;
    }
    var isempty = function(obj, pl) { var keys = pl || Object.keys(obj);
                                      for (var i in keys) if (Object.hasOwnProperty.call(obj, keys[i])) return false;
                                      return true; }
    var text = function(txt) { return document.createTextNode(txt) };
    var div = function() { return document.createElement("div") };
    var span = function(classname) { var s = document.createElement("span");
                                     if (classname) s.className = classname;
                                     return s; };
    var A = function A(txt, classname, callback) { var a = document.createElement("a");
                                                   if (classname) a.className = classname;
                                                   a.appendChild(text(txt));
                                                   a.href = '#';
                                                   a.onclick = function(e) { callback(); if (e) e.stopPropagation(); return false; };
                                                   return a; };

    function _renderjson(json, indent, dont_indent, show_level, options) {
        var my_indent = dont_indent ? "" : indent;

        var disclosure = function(open, placeholder, close, type, builder) {
            var content;
            var empty = span(type);
            var show = function() { if (!content) append(empty.parentNode,
                                                         content = prepend(builder(),
                                                                           A(options.hide, "disclosure",
                                                                             function() { content.style.display="none";
                                                                                          empty.style.display="inline"; } )));
                                    content.style.display="inline";
                                    empty.style.display="none"; };
            append(empty,
                   A(options.show, "disclosure", show),
                   themetext(type+ " syntax", open),
                   A(placeholder, null, show),
                   themetext(type+ " syntax", close));

            var el = append(span(), text(my_indent.slice(0,-1)), empty);
            if (show_level > 0)
                show();
            return el;
        };

        if (json === null) return themetext(null, my_indent, "keyword", "null");
        if (json === void 0) return themetext(null, my_indent, "keyword", "undefined");

        if (typeof(json) == "string" && json.length > options.max_string_length)
            return disclosure('"', json.substr(0,options.max_string_length)+" ...", '"', "string", function () {
                return append(span("string"), themetext(null, my_indent, "string", JSON.stringify(json)));
            });

        if (typeof(json) != "object" || [Number, String, Boolean, Date].indexOf(json.constructor) >= 0) // Strings, numbers and bools
            return themetext(null, my_indent, typeof(json), JSON.stringify(json));

        if (json.constructor == Array) {
            if (json.length == 0) return themetext(null, my_indent, "array syntax", "[]");

            return disclosure("[", " ... ", "]", "array", function () {
                var as = append(span("array"), themetext("array syntax", "[", null, "\n"));
                for (var i=0; i<json.length; i++)
                    append(as,
                           _renderjson(options.replacer.call(json, i, json[i]), indent+"    ", false, show_level-1, options),
                           i != json.length-1 ? themetext("syntax", ",") : [],
                           text("\n"));
                append(as, themetext(null, indent, "array syntax", "]"));
                return as;
            });
        }

        // object
        if (isempty(json, options.property_list))
            return themetext(null, my_indent, "object syntax", "{}");

        return disclosure("{", "...", "}", "object", function () {
            var os = append(span("object"), themetext("object syntax", "{", null, "\n"));
            for (var k in json) var last = k;
            var keys = options.property_list || Object.keys(json);
            if (options.sort_objects)
                keys = keys.sort();
            for (var i in keys) {
                var k = keys[i];
                if (!(k in json)) continue;
                append(os, themetext(null, indent+"    ", "key", '"'+k+'"', "object syntax", ': '),
                       _renderjson(options.replacer.call(json, k, json[k]), indent+"    ", true, show_level-1, options),
                       k != last ? themetext("syntax", ",") : [],
                       text("\n"));
            }
            append(os, themetext(null, indent, "object syntax", "}"));
            return os;
        });
    }

    var renderjson = function renderjson(json)
    {
        var options = Object.assign({}, renderjson.options);
        options.replacer = typeof(options.replacer) == "function" ? options.replacer : function(k,v) { return v; };
        var pre = append(document.createElement("pre"), _renderjson(json, "", false, options.show_to_level, options));
        pre.className = "renderjson";
        return pre;
    }
    renderjson.set_icons = function(show, hide) { renderjson.options.show = show;
                                                  renderjson.options.hide = hide;
                                                  return renderjson; };
    renderjson.set_show_to_level = function(level) { renderjson.options.show_to_level = typeof level == "string" &&
                                                                                        level.toLowerCase() === "all" ? Number.MAX_VALUE
                                                                                                                      : level;
                                                     return renderjson; };
    renderjson.set_max_string_length = function(length) { renderjson.options.max_string_length = typeof length == "string" &&
                                                                                                 length.toLowerCase() === "none" ? Number.MAX_VALUE
                                                                                                                                 : length;
                                                          return renderjson; };
    renderjson.set_sort_objects = function(sort_bool) { renderjson.options.sort_objects = sort_bool;
                                                        return renderjson; };
    renderjson.set_replacer = function(replacer) { renderjson.options.replacer = replacer;
                                                   return renderjson; };
    renderjson.set_property_list = function(prop_list) { renderjson.options.property_list = prop_list;
                                                         return renderjson; };
    // Backwards compatiblity. Use set_show_to_level() for new code.
    renderjson.set_show_by_default = function(show) { renderjson.options.show_to_level = show ? Number.MAX_VALUE : 0;
                                                      return renderjson; };
    renderjson.options = {};
    renderjson.set_icons('⊕', '⊖');
    renderjson.set_show_by_default(false);
    renderjson.set_sort_objects(false);
    renderjson.set_max_string_length("none");
    renderjson.set_replacer(void 0);
    renderjson.set_property_list(void 0);
    return renderjson;
}));


/***/ }),

/***/ 7:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_renderjson__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_renderjson___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_renderjson__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__codeMirrorLoader__ = __webpack_require__(1);




window.__renderjson = __WEBPACK_IMPORTED_MODULE_1_renderjson___default.a;

const $document = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(document);

function getParameterByName(name) {
  name = name.replace(/\[/, '\\[').replace(/[\]]/, '\\]');
  const regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
  const results = regex.exec(location.search);
  return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
}

$document.ready(function () {
  __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#tabs').tab();
  if (document.location.href.indexOf('query=') >= 0 && getParameterByName('query') !== '') {
    __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#tabs a[href="#advanced"]').tab('show');
  }
});

const addDoc = __WEBPACK_IMPORTED_MODULE_2__codeMirrorLoader__["default"].fromTextArea(document.getElementById('document'), {
  mode: { name: 'javascript', json: true },
  indentUnit: 4,
  electricChars: true,
  matchBrackets: true,
  lineNumbers: true,
  theme: ME_SETTINGS.codeMirrorEditorTheme,
});

const addIndexDoc = __WEBPACK_IMPORTED_MODULE_2__codeMirrorLoader__["default"].fromTextArea(document.getElementById('index'), {
  mode: { name: 'javascript', json: true },
  indentUnit: 4,
  electricChars: true,
  matchBrackets: true,
  lineNumbers: true,
  theme: ME_SETTINGS.codeMirrorEditorTheme,
});


window.checkValidJSON = function () {
  __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.ajax({
    type: 'POST',
    url: `${ME_SETTINGS.baseHref}checkValid`,
    data: {
      document: addDoc.getValue(),
    },
  }).done((data) => {
    if (data === 'Valid') {
      __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#documentInvalidJSON').remove();
      __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#addDocumentForm').submit();
    } else if (__WEBPACK_IMPORTED_MODULE_0_jquery___default()('#documentInvalidJSON').length === 0) {
      __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#document-modal-body').parent().append('<div id="documentInvalidJSON" class="alert alert-danger"><strong>Invalid JSON</strong></div>');
    }
  });
  return false;
};

window.checkValidIndexJSON = function () {
  __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.ajax({
    type: 'POST',
    url: `${ME_SETTINGS.baseHref}checkValid`,
    data: {
      document: addIndexDoc.getValue(),
    },
  }).done((data) => {
    if (data === 'Valid') {
      __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#indexInvalidJSON').remove();
      __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#addIndexForm').submit();
    } else if (__WEBPACK_IMPORTED_MODULE_0_jquery___default()('#indexInvalidJSON').length === 0) {
      __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#index-modal-body').parent().append('<div id="indexInvalidJSON" class="alert alert-danger"><strong>Invalid JSON</strong></div>');
    }
  });
  return false;
};

__WEBPACK_IMPORTED_MODULE_0_jquery___default()('#addDocument').on('shown.bs.modal', function () {
  addDoc.refresh();
  addDoc.focus();
});

__WEBPACK_IMPORTED_MODULE_0_jquery___default()('#addIndex').on('shown.bs.modal', function () {
  addIndexDoc.refresh();
  addIndexDoc.focus();
});

if (ME_SETTINGS.collapsibleJSON) {
  __WEBPACK_IMPORTED_MODULE_0_jquery___default()(function () {
    // convert all objects to renderjson elements
    __WEBPACK_IMPORTED_MODULE_0_jquery___default()('div.tableContent pre').each(function () {
      const $this = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(this);
      const text = __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.trim($this.text());
      if (text) {
        $this.html(__WEBPACK_IMPORTED_MODULE_1_renderjson___default()(JSON.parse(text)));
      }
    });
  });
  __WEBPACK_IMPORTED_MODULE_1_renderjson___default.a.set_show_to_level(ME_SETTINGS.collapsibleJSONDefaultUnfold);
}

function makeCollectionUrl() {
  const st = ME_SETTINGS;
  return `${st.baseHref}db/${st.dbName}/${st.collectionName}/`;
}

window.loadDocument = function (id) {
  location.href = `${makeCollectionUrl()}${encodeURIComponent(id)}`;
};

$document.ready(function () {
  const $tableWrapper = __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.tableWrapper');
  if (__WEBPACK_IMPORTED_MODULE_0_jquery___default()('.tableHeaderFooterBars').width() === $tableWrapper.width()) {
    // table wrapper is the same width as the table itself, so not overflowing, so remove the white gradient
    __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.fadeToWhite').remove();
  } else {
    __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.fadeToWhite').height(__WEBPACK_IMPORTED_MODULE_0_jquery___default()('.tableWrapper').height()); // limit the height only to the table div
  }

  __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.deleteButtonCollection').tooltip({
    title: 'Are you sure you want to delete this collection? All documents will be deleted.',
  });

  $tableWrapper.scroll(function () {
    const proximityToRightOfTable = __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.tableWrapper table').width() - $tableWrapper.scrollLeft() - $tableWrapper.width();
    document.getElementById('fadeToWhiteID').style.opacity = Math.min(Math.max(proximityToRightOfTable - 50, 50) - 50, 100) / 100;
  });

  __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.tooDamnBig').bind('click', function (e) {
    e.preventDefault();
    e.stopPropagation();

    const target = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(this);
    const _id = target.attr('doc_id');
    const prop = target.attr('doc_prop');
    const spinner = `<img src="${ME_SETTINGS.baseHref}public/img/gears.gif" />`;
    const leftScroll = $tableWrapper.scrollLeft();

    // Set the element with spinner for now
    target.html(spinner);

    __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.get(`${makeCollectionUrl()}${encodeURIComponent(_id)}/${prop}`, function (input) {

      // Images inline
      if (
        typeof input === 'string' &&
        (
          input.substr(0, 22) === 'data:image/png;base64,' ||
          input.substr(0, 22) === 'data:image/gif;base64,' ||
          input.substr(0, 22) === 'data:image/jpg;base64,' ||
          input.substr(0, 23) === 'data:image/jpeg;base64,'
        )
      )  {
        input = '<img src="' + input + '" style="max-height:100%; max-width:100%; "/>';
      }

      // Audio inline
      if (
        typeof input === 'string' &&
        (
          input.substr(0, 22) === 'data:audio/ogg;base64,' ||
          input.substr(0, 22) === 'data:audio/mp3;base64,'
        )
      )  {
        input = '<audio controls style="width:45px;" src="' + input + '">Your browser does not support the audio element.</audio>';
      }

      // Video inline
      if (
        typeof input === 'string' &&
        (
          input.substr(0, 23) === 'data:video/webm;base64,' ||
          input.substr(0, 22) === 'data:video/mp4;base64,'  ||
          input.substr(0, 22) === 'data:video/ogv;base64,'
        )
      )  {
        input = '<video controls><source type="' + input.substring(input.indexOf(':') + 1, input.indexOf(';')) + '" src="' + input + '"/>' +
          'Your browser does not support the video element.</video>';
      }

      if (typeof input === 'object' && (input.toString() === '[object Object]' || input.toString().substr(0, 7) === '[object')) {
        input = __WEBPACK_IMPORTED_MODULE_1_renderjson___default()(input);
      }

      // Set the element with gotten datas
      target.parent().html(input);

      // Set original scroll position
      __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.tableWrapper').scrollLeft(leftScroll);
    });
  });

  __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.deleteButtonDocument').on('click', function (e) {
    const $form = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(this).closest('form');
    e.stopPropagation();
    e.preventDefault();

    __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#confirm-deletion-document').modal({ backdrop: 'static', keyboard: false }).one('click', '#delete', function () {
      $form.trigger('submit'); // submit the form
    });
  });

  __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#deleteListConfirmButton').on('click', function () {
    // we just need to POST the form, as all the query parameters are already embedded in the form action
    __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#deleteListForm').trigger('submit');
  });

  __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.deleteButtonCollection').on('click', function (event) {

    __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.deleteButtonCollection').tooltip('hide');

    event.preventDefault();

    const $target = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(this);
    const $parentForm = __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#' + $target.attr('childof'));

    __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#confirmation-input').attr('shouldbe', $target.attr('collection-name'));
    __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#modal-collection-name').text($target.attr('collection-name'));
    __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#confirm-deletion-collection').modal({ backdrop: 'static', keyboard: false })
      .one('shown.bs.modal', function () {
        __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#confirmation-input').focus();
      })
      .one('click', '#delete', function () {
        const $input = __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#confirmation-input');
        if ($input.val().toLowerCase() === $input.attr('shouldbe').toLowerCase()) {
          $parentForm.trigger('submit');
        }
      });
  });

  const nextSort = {
    1: -1,
    '-1': 0,
    0: 1,
    undefined: 1,
  };
  __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.sorting-button').on('click', function () {
    const $this = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(this);
    const column = $this.data('column');
    const direction = nextSort[$this.data('direction')];

    __WEBPACK_IMPORTED_MODULE_0_jquery___default()('input.sort-' + column).val(direction).prop('checked', direction !== 0);

    const $form = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(__WEBPACK_IMPORTED_MODULE_0_jquery___default()('#tabs li.active a').attr('href') + ' form');
    $form.find('button[type="submit"]').click();
  });
});


/***/ })

},[7]);